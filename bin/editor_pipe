#!/bin/bash
if [ ! $# -eq 0 ]; then
  path="$(realpath ${@:-1})"
  workPath=""
  if [ -d $path ]; then
    workPath=$path
  elif [ -f $path ]; then
    workPath=$(dirname $path)
  fi
  set -- "${@:1:$(($#-1))}"
  name=$(basename $path)

  cleanName=$(echo "$name" | tr -dc '[:alnum:]')

  tmux new -A -D -s $cleanName -c $workPath "$EDITOR $@ $path";
fi
